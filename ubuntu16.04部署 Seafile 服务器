apt-get update
apt-get upgrade

安装bbr

安装nginx,并检查是否成功（防火墙）
sudo apt-get install nginx
sudo /etc/init.d/nginx start
（apt install firewalld)
systemctl start nginx
systemctl enable nginx.service
systemctl stop firewalld # 关闭防火墙）

安装mysql
sudo apt-get install mysql-server mysql-client
查看root密码
cd /etc/mysql/
sudo cat debian.cnf


安装依赖（Seafile 7.1.x 版本）
apt-get install python3 python3-setuptools python3-pip python3-ldap -y
pip3 install --timeout=3600 Pillow pylibmc captcha jinja2 sqlalchemy psd-tools \
    django-pylibmc django-simple-captcha

下载最新的服务器安装包
wget http://seafile-downloads.oss-cn-shanghai.aliyuncs.com/seafile-server_7.1.4_x86-64.tar.gz

部署和目录设计
mkdir /opt/seafile
mv seafile-server_* /opt/seafile
cd /opt/seafile
#将 seafile-server_* 移动到 seafile 目录下后
tar -xzf seafile-server_*
mkdir installed
mv seafile-server_* installed

安装
cd seafile-server-7.1.4(版本号与下载统一)
./setup-seafile-mysql.sh  #运行安装脚本并回答预设问题

启动 Seafile:
./seafile.sh start # 启动 Seafile 服务
启动 Seahub
./seahub.sh start  # 启动 Seahub 网站 （默认运行在127.0.0.1:8000端口上）

在另一端口上运行 Seahub
./seahub.sh stop # 停止 Seafile 进程
./seafile.sh stop # 停止 Seahub

修改gunicorn.conf
vi /opt/seafile/conf/gunicorn.conf
# default localhost:8000
bind = "0.0.0.0:8001"

重启 Seafile 服务器
./seafile.sh start # 启动 Seafile 服务
./seahub.sh start # 启动 Seahub 网站
